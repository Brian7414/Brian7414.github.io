<html>

<head>
    <script src="https://unpkg.com/p5"></script>
    <script src="https://unpkg.com/p5.collide2d"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/addons/p5.sound.js"></script>
</head>

<body>

    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: gray;
        }
    </style>
    <h1 id="point">0</h1>
    <h1 id="life">3</h1>
    <script>
        var w = 800;
        var h = window.innerHeight;
        var wi = (window.innerWidth / 2) - w / 2;
        var x = w / 2;
        var y = h / 2;
        var fighterone;
        var fighterop;
        var bossone;
        var smallenemy;
        var enemytwo;
        var bullet;
        var bossone;
        var bossop;
        var smallpic;
        var enemytwopic;
        var fireball;
        var explo;
        var explopic;
        var force = 25;
        var gravity = 10;
        var gravity2 = 10;
        var speed = 2;
        var score = 0;
        var timer = 0;
        var life = 3;
        var bg;
        var y1 = 0;
        var y2 = h;
        hit1 = false;
        hit2 = false;
        hit3 = false;
        hit4 = false;


        function preload() {
            bg = loadImage("bg.jpg");
            fighterop = loadImage("figherone.png");
            bossop = loadImage("bossone.png");
            fireball = loadImage("fireball.png");
            smallpic = loadImage("enemyone.png");
            explopic = loadImage("explosion.png");
            enemytwopic = loadImage("enemytwo.png");
        }

        function setup() {
            canvas = createCanvas(w, h);
            canvas.position(wi, 0);
            fighterone = new fighterone();
            bossone = new bossone();
            smallenemy = new smallenemy();
            bullet = new bullet();
            enemytwo = new enemytwo();
        }

        function draw() {
            image(bg, 0, y1, w, h);
            image(bg, 0, y2, w, h);
            y1 += speed;
            y2 += speed;

            if (y1 > h) {
                y1 = -h;
            }
            if (y2 > h) {
                y2 = -h;
            }
            fighterone.show();
            smallenemy.show();
            smallenemy.move();
            bullet.show();
            bullet.move();
            if (score >= 50) {
                enemytwo.show();
                enemytwo.move();
            }
            if(score >= 100){
                smallenemy.stop();
                bossone.show();
                bossone.move();
            }
            hit1 = collideRectRect(bullet.x, bullet.y, 50, 50, smallenemy.x, smallenemy.y, 50, 50);
            hit2 = collideRectRect(bullet.x, bullet.y, 50, 50, enemytwo.x, enemytwo.y, 50, 50);
            hit3 = collideRectRect(fighterone.x, fighterone.y, 50, 50, smallenemy.x, smallenemy.y, 50, 50);
            hit4 = collideRectRect(fighterone.x, fighterone.y, 50, 50, enemytwo.x, enemytwo.y, 50, 50);
        }

        function fighterone() {
            this.w = 100;
            this.h = 100;
            this.x = (w / 2) - this.w / 2;
            this.y = h - this.h;
            ax = this.x;
            ay = this.y;

            this.show = function () {
                image(fighterop, this.x, this.y, this.w, this.h);
                if (keyIsDown(65)) {
                    this.x -= 10;
                }

                if (keyIsDown(68)) {
                    this.x += 10;
                }
                if ((keyIsDown(65)) && (this.x < 0)) {
                    this.x = 0;
                }

                if ((keyIsDown(68)) && (this.x > w - this.w)) {
                    this.x = w - this.w;
                }
                if (life == 0) {
                    image(explopic, this.x, this.y, 100, 100);
                }
            }
        }

        function bullet() {
            this.x = fighterone.x;
            this.y = fighterone.y;
            this.show = function () {
                image(fireball, this.x, this.y, 50, 50);
            }
            this.move = function () {
                if (millis() <= 10 + timer) {
                    this.y -= force;
                    timer = millis();
                }

                if (this.y <= 0 - 50) {
                    this.x = fighterone.x;
                    this.y = fighterone.y;
                }
            }
        }


        function smallenemy() {
            this.y = -70;
            this.x = random(50, w - 50);
            this.show = function () {
                image(smallpic, this.x, this.y, 50, 50);
            }
            this.move = function () {
                if (millis() >= 10 + timer) {
                    this.y += gravity;
                    timer = millis();
                }
                if (this.y >= h + 50) {
                    this.y = -50;
                    this.x = random(50, w - 50);
                }
                if (hit1 == true) {
                    score += 10;
                    document.getElementById('point').innerHTML = score;
                    image(explopic, this.x, this.y, 100, 100);
                    this.y = -50;
                    this.x = random(50, w - 50);
                }
                if ((hit3 == true)) {
                    life -= 1;
                    document.getElementById('life').innerHTML = life;
                    image(explopic, this.x, this.y, 100, 100);
                    this.y = -50;
                    this.x = random(50, w - 50);
                }
                if (life == 0) {
                noloop();
            }
            this.stop = function(){
                this.y =-70;
                this.x =-70;
            }
            }
        }

        function enemytwo() {
            this.y = -70;
            this.x = random(50, w - 50);
            this.show = function () {
                image(enemytwopic, this.x, this.y, 50, 50);
            }
            this.move = function () {
                if (millis() <= 10 + timer) {
                    this.y += gravity2;
                    timer = millis();
                }
                if (this.y >= h + 50) {
                    this.y = -50;
                    this.x = random(50, w - 50);
                }
                if (hit2 == true) {
                    score += 10;
                    document.getElementById('point').innerHTML = score;
                    image(explopic, this.x, this.y, 100, 100);
                    this.y = -50;
                    this.x = random(50, w - 50);

                }
                if ((hit4 == true)) {
                    life -= 1;
                    document.getElementById('life').innerHTML = life;
                    image(explopic, this.x, this.y, 100, 100);
                    this.y = -50;
                    this.x = random(50, w - 50);
                }
            }
        }

        function bossone() {
            this.x = x-200;
            this.y = 0-400;
            this.show = function () {
                image(bossop, this.x, this.y, 400, 400);
            }
            this.move = function() {
            
            }       
        }
    </script>
</body>

</html>